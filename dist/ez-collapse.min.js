angular.module("ez.collapse",["ez.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function g(){k?(k=!1,f()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(f))}function h(){c.removeClass("collapsing"),c.addClass("collapse")}function i(){if(k)k=!1,h(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});c[0].offsetWidth;c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(h)}}var j,k=!0;b.$watch(d.collapse,function(a){a?i():g()})}}}]);